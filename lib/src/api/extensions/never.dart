part of '../../cont.dart';

/// Extension for running continuations that never produce a value.
///
/// This extension provides specialized methods for [Cont]<[E], [Never]> where only
/// termination is expected, simplifying the API by removing the unused value callback.
extension ContNeverExtension<E, F> on Cont<E, F, Never> {
  /// Converts a continuation that never produces a value to any desired type.
  ///
  /// The absurd method implements the principle of "ex falso quodlibet" (from
  /// falsehood, anything follows) from type theory. It allows converting a
  /// `Cont<E, Never>` to `Cont<E, A>` for any type `A`.
  ///
  /// Since `Never` is an uninhabited type with no possible values, the mapping
  /// function `(Never never) => never` can never actually execute. However, the
  /// type system accepts this transformation as valid, enabling type-safe
  /// conversion from a continuation that cannot produce a value to one with
  /// any desired value type.
  ///
  /// This is particularly useful when:
  /// - Working with continuations that run forever (e.g., from [thenForever])
  /// - Matching types with other continuations in composition
  /// - Converting terminating-only continuations to typed continuations
  ///
  /// Type parameters:
  /// - [A]: The desired value type for the resulting continuation
  ///
  /// Returns a continuation with the same environment type but a different
  /// value type parameter.
  ///
  /// Example:
  /// ```dart
  /// // A server that runs forever has type Cont<Env, Never>
  /// final server = handleRequests().thenForever();
  ///
  /// // Convert to Cont<Env, String> to match other continuation types
  /// final serverAsString = server.absurd<String>();
  /// ```
  Cont<E, F, A> absurd<A>() {
    return thenMap<A>((
      Never // gonna give you up
          never, // gonna let you down
    ) {
      return never; // gonna run around and desert you
    });
  }

  /*
  ..:..............:::------:::::::::----:-:::.::-----:::--::----::::::::----------:::::::::..........
................::::-------::::::::---::::::--=-=+*++*##**++=--:::::::----------:::::::::....:......
..............::::::::--:--:::::::::---::.:-*##########*******=::::::::----------::::..:...........:
..........::::::..::::::::-----------------=+*###############**+--------------------:..:............
.......:::::::....::::::...:----:::..:-:-=+***######%%#######***+------:::--------------:...........
..:::::::::::.....::::::.::--::::::::-===++**##################*+-------::------::-------:..........
:::::::::::::.....::::::::::::.......::-=++*++++=====+=----==*##*=:.------------::------------:.....
:::.....:::::.....::::::::............:=*#*+=++====----------=+**=:::-----------:::.:----------::...
:::........:::....:::::::::.:........:-*#*++++++====--=-------=**=::::::--------::::-----::::----::.
:..........::::...::::::::...........:-***+++++++===--==-----==**=::::::--------::::---:::::::----::
:........:::::::::::::::::...........:-+*++++*+++**+=-=+++=====*+-:::::---------::----::::::::::---:
::::.....:::...::::::::::.........::..:+++++++**+++++=-=+*+====+:......:-----------:----:::::::::--:
::::::..::.......:::::::::..........:====-=++====++++=--=======-....:::::---------:::----::::-----::
:....::::........::::::::::::.......-=++=-=+++==+++++=--------==::..:.::---------::::::----------:::
:......::...... ..::::::::--::.......-+====++++++++**++=-----==-:::.:-----------::::..::---------:::
:.......::.......:::::::..:---:.....:-==+++++++++++==-=-----===:::::-----:-------:.:.:.:--:..:::----
:........:........::::::..::------------:-=++++++++===--------:::------::::------:.:...:-:.....:----
:........:.......::::::::-------------.::-=++++++++===--==--------------::-------:.....:-:.......:--
:::......::......:::::::::-::...:.:---:---==+++++=====--===----:::.:-------------:.....-:......::---
::::......:......:::::::::::.:....::--:::-++++++++===-====-:---::::::::----------:::..:-:.....::::--
:::::.....::.....::::::::...:...::-------=+++++++++++=====-----::..::.::---------:::.:--:.....::::::
..::::...:::::::.:::::::....:::----------=+++++++++=======-::-----::::::::-------:::----:....::::...
.:::::::::....::::::::::...:.::----::::--=+++++++=========-==::----::::::::--------------:.:--::....
------::::......::::::---::::---------:-=+++++++++========:+##=:----::::::----------:::---:---::....
--------::.:....::::-------:--==+++=-=::---=+++++========--*####*=---::::---------::::::----------:.
::------:.......:---------=++*#####+=++++*++++++++===++=:-+###%%%%%#*+-::---------:::::::-----------
.---------:::..:-----==+*##%%%%%%%#*=++++++====++++++=-::=##%%%%%%%%%%%##*=::-----::::::-------:....
.--::-----:....:=++**##%%%%%%%%%%%%#=+*++++=+==++++--::::=#%%%%%%%%%%%%%%%%%##=::::::::---------::::
:--:..:----:..:=##%%%%%%%%%%%%%%%%%#=+***++-=+++=--:::::-*%%%%%%%%%#*+#%%%%%%%%%#*-::::-----:---::::
:-::.::-----::-*%%%%%%#%%%%%%%%%%%%#=+***++===---::::::=#%%%%%%%%#*+++===+#%%%%%%%%#*:-----:::---:::
:::....:----::+#%%%%%%%%%%%%%%%%%%%%******++*+++++=-::=%%%%%%%%%%*+++++++===*%%%%%%%#*------::---:::
:::.:..:------*#%%%%%%%%%%%%%%%%%%%%****++=***++===++*%%%%%%%%%%#+++++======+#%%%%%%##+---:::::---::
::...::--::--=#%%%%%%%%%%%%%%%%%%%%%%%*==+**+=--=++*##%%%%%%%%%%#++++=======+%%%%%%%%#+:--::::::--::
-:..:----:::-=#%%%%%%%%%%%%%%%%%%%%%%%#======++**#***#%%%%%%%%%%%#**+======+*%%%%%%%%%*-----::::---:
-:::-------:+*#%%%%%%%%%%%%%%%%%%%%%%%+-==+*###**+==+%%%%%%%%%%%%%%*++=====+#%%%%%%%%#*------:::---:
::----:::--=*#%%%%%%%%%%%%%%%%%%%%%%%%+-==***+=--=+*%%%%%%%%%%%%%%%*++=====+#%%%%%%%%#*-------::---:
----:.....:+#%%%%%%%%%%%%%%%%%%%%%%%%%+--==--=+*#%%%%%%%%%%%%%%%%@%#*++====+#%%%%%%%%%*::::---------
---::::.:::+%%%%%%%%%%%%%%%%%%%%%%%%%%*==+##%%%%#+=+%%%%%%%%%%%%%@@%**+====+#%%%%%%%%%*:::::::------
-:.......:-+%%%%%%%%%%%%%%%%%%%%%%%%%%%**##*+=====+#%%%%%%%%%%%%@@@@%**++===+%%%%%%%%%#-::::::------
:........:-*%%%%%%%%%%%@%%%%%%%%%%%%%%%**+===+*#%%%%%%%%%%%%%%%@@@@@@@%%%%%%#%%%%%%%%%#=:::::::::---
:........:=*%%%%%%%%%%%@%%%%%%%%%%%%%%%**####%%#***%%%%%%%%%%@@@@@@@@@@@%####%%%%%%%%%#=::::--:-----
-::...:::=+#%%%%%@@@@@@@@@@%%%%@%%%%%%%**##*+++++*#%%%%%%%%@@@@@@@@@@@@@%%%%%%%%##%%%%%*-::::::::---
---:::::=++#%%%%%@@@@@@@@@@@%%@@%%%%%%%***+++**##%%@%@%%%@@@@@@@@@@@@@@@@@@@@%%%%#%%%%%%#=-:::------
----::-*###%%%%%@@@@@@@@@@@@%#+++++++++**#########%%%%%%%@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%*-::-------
:----+%%%%%@@@@@@@@@@%@@@@@#**+++++*+++**####**++*%@%%@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%*=------=-
::--=##%%%##%%%%%%%%*##**#*++++++++++++*********#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%*----==
:::-*%%%%%%#*###%%%#**##%%#****++++++++*****###%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%*=-==
--:-*%%%###%%%%%@%#*%%%%%%#****++*++++***%%%%%%#*#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%@%%%@%%%%%*==
:::--*%#%%%%%%%@%%#%%%%%%%#****++*++++%****+++**#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%@%%%%%#==
::-===#%%%%%%%%%%%%%@@@%%%##*******#%@@#****###%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%@@%%%%+==
:--===#%%%%%%%%%%%%%%%%@@@@@%%%@@@@@@@@##%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%@%%%+===
-=----*%%%%%%%%%%%###%%%%%%%@@@@@@@@@@@#********#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%*-===
----:--=*#%%%%%%%%%#%%@@@@@@@@@@@@@@@@%#*####%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%#=====
::::....:::--=========-================--==------=============================================::::::

   */
}
